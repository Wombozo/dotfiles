#### 🖱️ Souris #######################################################

# Activer la souris (clic, scroll, resize)
set -g mouse on

# Raccourci pour basculer mouse on/off
bind m run-shell 'tmux show -g mouse | grep -q on && tmux set -g mouse off || tmux set -g mouse on'

# Raccourci pour le search
bind-key -T prefix C-f copy-mode
bind-key -T prefix / copy-mode \; send-keys "/"

#### ⚙️ Réglages globaux #############################################

set -g history-limit 100000     # scrollback plus long
set -g base-index 1             # fenêtres numérotées à partir de 1
setw -g mode-keys vi            # navigation en mode 'vi'

#### ⌨️ Préfixes #####################################################

set -g prefix C-b
bind C-b send-prefix

### Navigation #######################################################

bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

bind -n M-Left  select-pane -L
bind -n M-Down  select-pane -D
bind -n M-Up    select-pane -U
bind -n M-Right select-pane -R

#### 🪟 Splits intelligents ##########################################

unbind %
bind % split-window -h -c "#{pane_current_path}"

unbind '"'
bind '"' split-window -v -c "#{pane_current_path}"
unbind c
bind c new-window -c "#{pane_current_path}"


#### 🎨 Barre de statut ##############################################

# # Barre de statut simple si les plugins ne sont pas chargés
# set -g status-left ""
# set -g status-right "Mouse #{?mouse,on,off} | Session #S"

#### 🔌 Plugins (activés seulement si TPM est installé) ###############

# Liste des plugins si TPM est dispo
if-shell '[ -d ~/.tmux/plugins/tpm ]' {
    set -g @plugin 'tmux-plugins/tpm'
    set -g @plugin 'tmux-plugins/tmux-resurrect'
    set -g @plugin 'rickstaa/tmux-notify'
    set -g @plugin 'jaclu/tmux-menus'
    set -g @treemux-tree-client 'neo-tree'  # or 'nvim-tree'
    set -g @treemux-tree-nvim-init-file '~/.tmux/plugins/treemux/configs/treemux_init.lua'
    set -g @plugin 'kiyoon/treemux'

    # Dracula
    set -g @dracula-show-powerline false
    set -g @dracula-show-left-icon "#S"
    set -g @dracula-show-fahrenheit false

    set -g @dracula-show-fahrenheit false
    set -g status-position bottom
    set -g @dracula-plugins "cwd"

    set -g @plugin 'dracula/tmux'

    run-shell '~/.tmux/plugins/tpm/tpm'
}

#### 🔁 Recharger la config facilement ###############################

bind r source-file ~/.tmux.conf \; display-message "Config rechargée 🎉"

